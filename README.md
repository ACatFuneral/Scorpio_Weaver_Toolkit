# -
连草履虫都能学会的保姆级教程

你好，未来的汉化大佬！
还在为手动给成千上万行代码添加翻译符号 _() 而头疼吗？
还在为游戏里人名翻译不统一而抓狂吗？
还在为汉化后字体变成“口口口”而束手无策吗？
忘掉那些痛苦吧！
现在为你带来了这套“本地化三神器”组合包，它将为你扫清汉化路上的三大障碍，让你能把宝贵的精力真正投入到“翻译”这件核心工作上。
本工具集的作用是：自动化地为游戏做好翻译前的所有准备工作。它不能帮你翻译，但能让你接下来的翻译过程顺畅百倍！
准备好了吗？让我们开始解放生产力吧！


第一步：战前准备 (磨刀不误砍柴工)
在开始之前，你需要准备好以下几样东西：
1．Python 环境： 我们的神器是由Python语言驱动的。如果你的电脑还没有安装，请点击这里访问官网下载并安装。安装时，请务必勾选 Add Python to PATH 这个选项！
2.一个AI账号的API密钥：
API Key (密钥): 这是一长串像密码一样的字符，是你的AI通行证。
Base URL (API地址): 这是你连接AI服务商的服务器地址。
（你可以从任何兼容OpenAI格式的AI服务商那里获取，比如火山或其他你信任的服务商。去你妈的火山！）
3.游戏本体： 当然，你需要准备好你要汉化的游戏文件。
4.一份游戏备份： 血的教训！在对游戏做任何修改前，请务必、一定、必须把整个游戏文件夹复制一份作为备份！
5.魔法工具：节点选择美国，英国地区为佳，如果要用到Gemini的话。
6.Google AI Studio，地址https://aistudio.google.com/prompts/new_chat
7.提示词：见群文件（具体根据自己风格和需求修改提示词）
8.一体化脚本：见群文件
9.老K的提取工具：见群文件
10.对比工具：Beyond Compare、WinMerge、VSC自带对比，想用啥用啥，啥顺手用啥。群文件提供一个30天版的Beyond Compare。
11.Lingua：自己去GitHub网站下载 

第二步：启动主力战舰！【自动化本地化预处理工具】
这个工具是我们的核心，它能自动给需要翻译的文本加上 _() 标记。
操作流程：
1.创建脚本文件： 在你电脑的任意位置（比如桌面、比如D盘）把第自动化本地化预处理工具扔进去，如果你是复制的，切记文件名字不能重复，不然运行会报错，另存为任意非中文名字的.py，比如123.rp、AAA.py等。
2.进行配置（最关键的一步！）： 用记事本或任何代码编辑器打开 123.rp文件，找到顶部的【配置区】，按要求填入你的信息：
API_KEY: 粘贴你的API密钥。
BASE_URL: 粘贴你的API地址。
MODEL_NAME: 填写你使用的模型名称，比如 gemini-1.5-pro-latest。
这里我建议选择代码能力强、速度快的，比如Gemini2.5flash、deepseekV3都行。我没用过Claude，好像会被道德审核，至于GPT4o？不熟谢谢！Gork3？你谁啊？如果你用V3，我建议用火山的，这一步主要是需要速度。
（去你妈的火山x2，用Gemini吧，有且只有这唯一的选项！！！）
这一步不光要求速度，道德审核也很严重，阿西吧！尼玛的火山，尼玛的deepseek！
别着急，如果遇到道德审核或者你的API不咋滴，我后面更新了手动的办法！
GAME_DIRECTORY: 这是重中之重！
找到你游戏文件夹里的那个 game 文件夹。
在文件夹上右键，选择“复制地址”或“复制为路径”。
粘贴到脚本的 r'' 引号内。
示例: GAME_DIRECTORY = r'G:\你要翻译的游戏\game'
OVERWRITE_FILES: 强烈建议保持 False！ 这会为你创建 .new.rpy 新文件，而不是直接覆盖原文件，给你留了后悔药。
3.运行脚本：
1、打开CMD，使用 cd 命令，首先切换到你的游戏盘，无论是DEFGHJ，随便，以H盘为例：
CMD下输入H:然后按回车。
 

2、进入脚本所在的目录。 使用 cd 命令进入你保存脚本的文件夹。例如，如果你把它保存在 D:\MyGame 里（记得文件目录不要用中文），就输入：cd D:\MyGame，（直接扔根目录其实最方便,直接就不需要这一步了。）然后按回车。
3、执行脚本。 现在，你已经在正确的目录下了，直接输入以下命令运行脚本：
python 你重新命名的.py或者py 你重新命名的.py（文件名字要跟上面你写同名，一点都不能错。比如123.py）按回车。
脚本会显示警告信息。仔细阅读后，输入 yes 并按回车。
然后就泡杯茶，看着脚本为你自动完成所有繁重的工作吧！
 
 
（有报错是正常的哈，毕竟API有波动就有抽风的情况，报错少可以选择手动提取或者直接翻源码，报错超多建议检查网络或配置后重新来过。）

收获成果： 处理完成后，回到你的游戏 game 文件夹，你会发现多了很多以 .new.rpy 结尾的新文件。这些就是被神器加好标记的文件！（所有子目录下都会有，不光是在game下）
 
 

第三步：铸造灵魂！【术语表铸造熔炉】
翻译的灵魂在于统一。这个工具能帮你把所有角色名都抓出来，做成一个Excel术语表，确保“艾米丽”不会被翻译成“爱美丽”。
操作流程：
1.创建脚本文件： 和上一步一样，把第二个脚本的代码复制进去，保存为--你喜欢的名字.py。（可以和上一个脚本放一起,名字也可以改，比如456.py）
2.进行配置： 打开456.py，只需要修改一项：
GAME_DIRECTORY: 粘贴你游戏 game 文件夹的完整路径（和上一步填的一模一样）。
 
运行脚本： 在同一个命令行窗口里，输入 py 456.py 然后按回车。
 
收获成果： 脚本运行完毕后，你会在脚本所在的文件夹里发现一个名为 glossary.xlsx 的Excel文件。打开它，你会看到所有提取出的角色名都在 src 列。你只需要在 dst 列填上对应的中文译名即可！
 
这一步可以扔到Gemini里，让它给你一键翻译并且一键替换，当然，deepseek也可以，随你喜欢。


第四步：关键检查与替换 (选择你喜欢的方式)：
强烈推荐使用 Beyond Compare、WinMerge 或 VS Code 的对比功能，来检查 .new.rpy 文件与原文件的差异，确保AI的修改符合预期（只加了 _()，没动别的东西）。
 
（选择文件夹比较）
 
左边输入框：(.*)\.rpy
 右边输入框：$1.new.rpy
 
或者你可以多添加个名称过滤，然后无独有那里改成差别也行，反正看自己喜欢，完成后右边随便点一个new双击就进入对比模式了。
 
点上下区段可以快速切到差异点，然后左右对比查看之后点替换，然后点保存，完成后直接点x掉就回到主目录了。
 
根目录替换完别忘了还有子目录
 
AI也会出错，AI也不是万能的，而且网络波动错误抽风造成提取不完全，提取错误是真正常的事。正好我举例的这游戏有各种问题，这种一眼出错的格式你不替换，保留原文就行了。
对比完成，在所有文件都审核合并完毕后，手动将对比过的.new.rpy全部删除，过河拆桥了属于是！
最终目标：无论使用哪种方法，确保最后 game 文件夹里留下的是被修改过、且文件名是 .rpy的文件。

第五步：施展终极魔法！【字体替换魔法卷轴】
有时候会遇到骚作者，比如这样的，喜欢在文本里嵌入字体的！（下图是我没制作工具之前手动替换的，不要在意细节，知道意思就行了！）
 

这种无论是提取之前改还是提取之后再改，都有可能破坏哈希值会造成翻译不显示，很烦！所以，万事俱备，只欠东风。为了让你的中文翻译能在游戏里完美显示，而不是变成一堆方块“□□□”，我们需要这最后一道魔法。
操作流程：
1.准备中文字体： 找一个你喜欢的、免费可商用的中文字体（.ttf 或 .otf 格式）。
2.创建字体文件夹：在你的游戏game 目录下，依次创建文件夹，路径为 game/tl/Chinese/fonts（大小写看你自己的习惯。）。然后把你准备好的中文字体文件放进这个 fonts 文件夹里。
3.创建魔法卷轴：
在你的游戏 game 目录下，新建一个文本文档。
把第三个脚本的代码（字体替换的那段）完整地复制进去。
将这个文件重命名为 z_font_hack.rpy。（或者随你喜欢改名字，加 z_ 是个好习惯，能让它在游戏启动时较晚加载，确保覆盖效果）。
4.配置卷轴：
打开 z_font_hack.rpy，找到 font_replacement_map 这个部分。
左边是要被替换的英文字体文件名。
我怎么知道游戏用了什么字体？
打开vsc，全局搜字体.ttf和.otf。
右边是你准备好的中文字体路径。
路径就是我们第二步创建的那个，比如 "tl/Chinese/fonts/你的中文字体.ttf"。
你可以根据需要，添加任意多条替换规则。

第六步：开始翻译，老K，lingua联合启动!！ 
1.现在启动 Ren'Py Launcher，选择你的项目，点击生成翻译文件（这特么不用教了吧，不会的建议死一死！）

2.下面，我们的老K终于登场了！
 
把工具tool扔到tl\Chinese文件夹里，build文件放在D盘：
D:\renpytool下，没有这个目录就创建一个！！！
 3.点开老K工具，点移动，把所有子文件夹里的文件都挪出来。（还原是翻译完后再点的）
 
4.然后把生成的tl文件扔到lingua里。
 
5.lingua启动！！！
 
接口自己设置！不教，不管，不负责！
术语表里添加我们刚才做好的术语表。导入就好！
 
提示词里填写我们专门为lingua定制的提示词（见群文件）
 
以上都记得保存，然后点右上角启用！！！
6.点击开始翻译
 
然后？喝茶抽烟看剧随便你！！！
7.翻译完成之后在lingua 目录下output文件夹里找到翻译后的文本，替换回去。
然后用老K的工具点击还原，还原完过河拆桥，干掉老K的软件就行了，下次再用就再复制一个，哈哈哈哈。
至于后面加自己的字体啊什么的都特么会，我就不教了！

PS:这玩意不是万能的，记住，会报错，会漏，也许还会有各种各样我没测试到的问题。
忙活一整天，你们来测试吧！它只是最大幅度的把Ren'PySDK提取不了的文本帮你提取出来。还是有很多超出AI极限，根本处理不了的代码！比如这种：
 
你把AI脑瓜子干冒烟它也搞不定，别想了，我昨儿都试了一天了！
遇到特殊的要么你手动提取，要么自己干特么的源码得了！

更新：如果说你遇到的严重的道德审核，以及要提取的文件超大（超过了我们设置的500k的阈值）

你可以采取两种办法：
一、分割！
把文件挪走，然后拆分成若干个小的文件，让脚本去读取小文件，等你完成替换之后再把新的小文件挨个移回大文件中。

二、手动解决：
你需要的神兵利器：
一个强大的代码编辑器，比如 VS Code (Visual Studio Code)。它免费、强大，并且拥有顶级的全局搜索和正则匹配功能。（Sublime Text, Notepad++ 也可以，但VS Code是首选）
作战步骤：
战场分割 (File Triage)：
按照你的想法，在运行“最终圣剑”脚本前，先把那些高风险文件（如script.rpy, gallery.rpy等）从game文件夹里暂时移走，放到一个单独的“待处理”文件夹里。然后对剩下的低风险文件运行自动化脚本。

开启“神之眼” (Global Search with Regex)：
用VS Code打开你那个“待处理”文件夹。
按下 Ctrl + Shift + F，打开全局搜索面板。
在搜索框旁边，点亮一个看起来像 .* 的小图标，这就是**“启用正则表达式”**的开关。
输入“索敌咒语” (The Regex Patterns)：

现在，你可以在搜索框里输入我们专门设计的“正则咒语”，来一次性找到所有需要处理的“天坑”代码。


【你的专属正则咒语库】

咒语一：查找所有renpy.input()里的文本
renpy\.input\s*\(\s*"([^"]+)"
效果：它会立刻列出所有文件中，所有renpy.input("...")里面的那段文本。

咒语二：查找所有Character()里的角色名
Character\s*\(\s*"([^"]+)"
效果：找到所有define x = Character("角色名")里的“角色名”。

咒语三：查找所有show text后面的文本
show\s+text\s+"([^"]+)"

咒语四：查找所有赋值给变量的、可能是对话的字符串 (这个比较复杂，但很强大)
\$\s*\w+\s*=\s*"([^"]{10,})"
效果：查找所有$ 变量 = "..."的行，但只显示那些字符串长度超过10个字符的（为了过滤掉$ flag = "win"这种短的代码变量）。

咒语五：查找所有函数调用里的字符串参数 (这是一个比较通用的“大招”)
\w+\s*\(\s*[^)]*\b"([^"/]+?)"
效果：查找大多数函数调用里的字符串，并且会尝试排除掉像"images/a.png"这样的文件路径。

手动“点穴” (Manual Application of _())：
VS Code的搜索结果会像一个清单一样列出来，你可以点击每一条结果，编辑器就会自动跳转到对应的代码行。
现在，轮到你——人类指挥官——出场了。你看着跳转到的代码行，用你的智慧判断：“这句是不是给玩家看的？”
如果是，你就手动在字符串外面加上_()。
如果不是（比如它是个文件名），你就直接跳过，看下一条搜索结果。

你的“附魔”工作台
1.	左边是“索敌结果”列表：VS Code的全局搜索结果。
2.	右边是“代码操作台”：点击左边的结果，右边就会自动跳转到对应的代码行。
“附魔”手法详解
假设你点击了一条搜索结果，右边的代码操作台显示了这一行：
$ fn = renpy.input("Fuck!", default=persistent.galleryfn)
你的任务，就是把 _() 加在那个字符串的外面。
手法一：经典“首尾包抄”
1.	把光标移动到字符串的第一个引号 " 前面。
2.	输入 _(。
3.	代码会变成：$ fn = renpy.input(_("Fuck!", default=persistent.galleryfn)
4.	把光标移动到字符串的最后一个引号 " 后面。
5.	输入 )。
6.	附魔完成！ 最终代码：
$ fn = renpy.input(_("Fuck!"), default=persistent.galleryfn)

手法二：高手“选中环绕” (VS Code快捷键)
这是更快、更不容易出错的方法，强烈推荐你练习一下！
1.	用鼠标双击那个字符串 " Fuck!"，VS Code会自动帮你选中整个字符串（包括引号）。
2.	现在，直接按下 ( （左括号）键。
3.	奇迹发生！ VS Code会自动用一对括号 () 把你选中的内容包起来！
代码会变成：$ fn = renpy.input(("Fuck!"), default=persistent.galleryfn)
4.	现在，你只需要把光标移动到第一个括号 ( 前面，补上一个下划线 _ 就行了。
5.	附魔完成！
（这个“选中环绕”功能对 "、'、[、{ 等所有成对的符号都有效，是程序员的必备神技！）

你的工作流程就是：
1.	在左边的搜索结果列表里，从上到下，挨个点击。
2.	每点击一个，就在右边的代码操作台里，用你喜欢的手法给它“附魔”。
3.	按 Ctrl + S 保存你对这个文件的修改。
4.	继续点击下一条搜索结果。
这个过程虽然是手动的，但因为有“索敌咒语”帮你定位，你的效率会非常高。而且最重要的是，每一步都在你的掌控之中，100%安全可靠！

这个方案的巨大优势
•	零API成本：整个过程完全在你本地电脑上进行，不花一分钱。
•	无视道德审核：没有任何AI会来审查你的文本，你想怎么处理就怎么处理。
•	速度极快：全局正则搜索的速度是毫秒级的，比任何API请求都快。
•	精准可控：最终的决定权在你手上，你可以100%确保不会改错任何一行代码。
•	无视文件大小：别说500KB，就算是5MB的超大文件，VS Code处理起来也毫无压力。

PS: “咒语5”（通用函数调用）更宽泛，所以它的搜索结果会包含“咒语2”（Character()）这种更具体的函数。我们可以先用具体的咒语，再用通用的“大招”来查漏补缺。

恭喜你！你已经掌握了这套神器的使用方法！

去干活吧，英雄！！！

